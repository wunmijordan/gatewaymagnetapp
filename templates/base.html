{% load static %}
{% load user_avatar_tags %}
{% load guest_avatar_tags %}
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Gateway Magnet{% endblock %}</title>

  <!-- PWA manifest and theme color -->
  <link rel="manifest" href="{% static 'manifest.json' %}">
  <meta name="theme-color" content="#2e303e">

  <!-- Apple support -->
  <link rel="apple-touch-icon" href="{% static 'images/icons/icon-192x192.png' %}">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <link rel="icon" type="image/png" sizes="192x192" href="{% static 'images/icons/icon-192x192.png' %}">
  <link rel="icon" type="image/png" sizes="512x512" href="{% static 'images/icons/icon-512x512.png' %}">
  <link rel="icon" type="image/png" sizes="512x512" href="{% static 'images/icons/icon-512x512-maskable.png' %}">


  <!-- CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/@tabler/core@latest/dist/css/tabler.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/@tabler/icons-webfont/tabler-icons.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">
  <link href="{% static 'css/custom.css' %}" rel="stylesheet" />

  {% block extra_css %}{% endblock %}
</head>
<body class="d-flex flex-column min-vh-100">


  <div class="page">
    <header class="navbar navbar-expand-md d-print-none">
      <div class="container-xl">
        <!-- BEGIN NAVBAR TOGGLER -->
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <!-- END NAVBAR TOGGLER -->
        <!-- BEGIN NAVBAR LOGO -->
        <div class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
          <a href="{% url 'dashboard' %}" aria-label="Gateway Nation" class="navbar-brand d-flex align-items-center">
            <img src="{% static 'images/church_logo.png' %}" alt="Logo" width="60" height="60" class="me-2">
          </a>
        </div>
        <!-- END NAVBAR LOGO -->
        <div class="navbar-nav flex-row order-md-last">
          <div class="d-none d-md-flex">
            <div class="nav-item">
              <a href="?theme=dark" class="nav-link px-0 hide-theme-dark" data-bs-toggle="tooltip" data-bs-placement="bottom" aria-label="Enable dark mode" data-bs-original-title="Enable dark mode">
                <!-- Download SVG icon from http://tabler.io/icons/icon/moon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                  <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                </svg>
              </a>
              <a href="?theme=light" class="nav-link px-0 hide-theme-light" data-bs-toggle="tooltip" data-bs-placement="bottom" aria-label="Enable light mode" data-bs-original-title="Enable light mode">
                <!-- Download SVG icon from http://tabler.io/icons/icon/sun -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                  <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path>
                  <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
                </svg>
              </a>
            </div>
            <div class="nav-item dropdown d-none d-md-flex me-3">
              <a href="#" class="nav-link px-0" data-bs-toggle="dropdown" tabindex="-1" aria-label="Show app menu" data-bs-auto-close="outside" aria-expanded="false">
                <!-- Download SVG icon from http://tabler.io/icons/icon/apps -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                  <path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"></path>
                  <path d="M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"></path>
                  <path d="M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"></path>
                  <path d="M14 7l6 0"></path>
                  <path d="M17 4l0 6"></path>
                </svg>
              </a>
              <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-end dropdown-menu-card">
                <div class="card">
                  <div class="card-header">
                    <div class="card-title">My Apps</div>
                    <div class="card-actions btn-actions">
                      <a href="#" class="btn-action">
                        <!-- Download SVG icon from http://tabler.io/icons/icon/settings -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                          <path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"></path>
                          <path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path>
                        </svg>
                      </a>
                    </div>
                  </div>
                  <div class="card-body scroll-y p-2" style="max-height: 50vh">
                    <div class="row g-0">
                      <div class="col-4">
                        <a href="#" class="d-flex flex-column flex-center text-center text-secondary py-2 px-2 link-hoverable">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Google-Drive--Streamline-Svg-Logos" height="24" width="24">
                            <desc>
                              Google Drive Streamline Icon: https://streamlinehq.com
                            </desc>
                            <path fill="#0066da" d="m2.02664 19.49685 1.036385 1.7901c0.215325 0.376875 0.524875 0.672975 0.8883 0.888325 1.040875 -1.321275 1.76545 -2.3352 2.173675 -3.041825 0.414275 -0.717075 0.9235 -1.838675 1.52765 -3.364825 -1.6281 -0.214275 -2.861875 -0.321425 -3.701325 -0.321425 -0.805575 0 -2.03935 0.10715 -3.701325 0.321425 0 0.41725 0.107675 0.834475 0.323025 1.21135l1.453615 2.516875Z" stroke-width="0.25"></path>
                            <path fill="#ea4335" d="M20.0487 22.175275c0.363425 -0.21535 0.672975 -0.51145 0.8883 -0.888325l0.430725 -0.74025 2.05925 -3.566725C23.642325 16.6031 23.75 16.185875 23.75 15.768625c-1.671575 -0.214275 -2.903125 -0.321425 -3.694575 -0.321425 -0.850575 0 -2.0821 0.10715 -3.694575 0.321425 0.597 1.5345 1.099475 2.656125 1.50745 3.364825 0.41155 0.714975 1.13835 1.728925 2.1804 3.041825Z" stroke-width="0.25"></path>
                            <path fill="#00832d" d="M12.00005 8.231375c1.20435 -1.45455 2.03435 -2.576175 2.489975 -3.364825 0.366875 -0.63505 0.77065 -1.648975 1.211325 -3.04181 -0.3634 -0.21535 -0.78065 -0.3230225 -1.211325 -0.3230225H9.51005c-0.4307 0 -0.847925 0.1211325 -1.21135 0.3230225 0.560525 1.597435 1.03615 2.73431 1.4269 3.410635 0.431775 0.747375 1.189925 1.74605 2.27445 2.996Z" stroke-width="0.25"></path>
                            <path fill="#2684fc" d="M16.347225 15.768625h-8.69475L3.951175 22.17525c0.3634 0.21535 0.78065 0.323025 1.21135 0.323025h13.674675c0.4307 0 0.84795 -0.121125 1.21135 -0.323025L16.347225 15.768625Z" stroke-width="0.25"></path>
                            <path fill="#00ac47" d="M12 8.2314 8.2987 1.824745c-0.3634 0.2153475 -0.673 0.5114425 -0.888325 0.88833L0.573025 14.557275C0.357675 14.93415 0.25 15.3514 0.25 15.768625h7.40265L12 8.2314Z" stroke-width="0.25"></path>
                            <path fill="#ffba00" d="M20.0083 8.635175 16.589625 2.713075c-0.215325 -0.3768875 -0.5249 -0.6729825 -0.888325 -0.88833L12 8.2314l4.34735 7.537225h7.3892c0 -0.417225 -0.107675 -0.834475 -0.323025 -1.21135L20.0083 8.635175Z" stroke-width="0.25"></path>
                          </svg>
                          <span class="h5">Google Drive</span>
                        </a>
                      </div>
                      <div class="col-4">
                        <a href="#" class="d-flex flex-column flex-center text-center text-secondary py-2 px-2 link-hoverable">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Google-Meet--Streamline-Svg-Logos" height="24" width="24">
                            <desc>
                              Google Meet Streamline Icon: https://streamlinehq.com
                            </desc>
                            <path fill="#00832d" d="m13.544075 12 2.2909 2.61865 3.080875 1.9686 0.535875 -4.5707 -0.535875 -4.4676 -3.13985 1.729275L13.544075 12Z" stroke-width="0.25"></path>
                            <path fill="#0066da" d="M0.2501225 16.161825V20.05675c0 0.88935 0.7218175 1.61135 1.6113475 1.61135H5.756375l0.806525 -2.942825 -0.806525 -2.56345 -2.67215 -0.806525 -2.8341025 0.806525Z" stroke-width="0.25"></path>
                            <path fill="#e94235" d="M5.75625 2.3319025 0.25 7.838175l2.83425 0.80465 2.672 -0.80465 0.791875 -2.5285L5.75625 2.3319025Z" stroke-width="0.25"></path>
                            <path fill="#2684fc" d="M0.2501225 16.163625H5.756375V7.8381H0.2501225v8.325525Z" stroke-width="0.25"></path>
                            <path fill="#00ac47" d="m22.43315 4.6633 -3.517375 2.88575v9.038125l3.53205 2.896975c0.5287 0.414175 1.30215 0.03665 1.30215 -0.6354V5.28575c0 -0.67955 -0.79185 -1.0552 -1.316825 -0.62245Z" stroke-width="0.25"></path>
                            <path fill="#00ac47" d="M13.544 12v4.161825H5.756225v5.506275h11.548225c0.889525 0 1.61135 -0.722 1.61135 -1.61135V16.58725L13.544 12Z" stroke-width="0.25"></path>
                            <path fill="#ffba00" d="M17.30445 2.3319025H5.756225V7.838175H13.544V12l5.3718 -4.451075V3.94325c0 -0.889525 -0.721825 -1.6113475 -1.61135 -1.6113475Z" stroke-width="0.25"></path>
                          </svg>
                          <span class="h5">Google Meet</span>
                        </a>
                      </div>
                      <div class="col-4">
                        <a href="#" class="d-flex flex-column flex-center text-center text-secondary py-2 px-2 link-hoverable">
                          <style>
                            .whatsapp-icon {
                              color: #25D366; /* Google Drive green or any hex color */
                            }
                          </style>
                          <svg class="whatsapp-icon" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-whatsapp">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" />
                            <path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" />
                          </svg>
                          <span class="h5">Google Meet</span>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="nav-item dropdown">
            <a href="#" class="nav-link d-flex lh-1 p-0 px-2 text-white" data-bs-toggle="dropdown" aria-label="Open user menu" aria-expanded="false">
              <img src="{% static 'profile_pics/'|add:request.user.username|add:'/image.jpg' %}" alt="User Picture">
              <div class="d-none d-xl-block ps-2">
                <div>{{ user.get_full_name|default:user.username }}</div>
                <div class="mt-1 small text-secondary">
                  {% if user.is_superuser %}
                    Superuser
                  {% elif user.groups.first %}
                    {{ user.groups.first.name }}
                  {% else %}
                    Sign-in
                  {% endif %}
                </div>
              </div>
            </a>
            <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
              <a href="https://gatewaynation.org" class="dropdown-item" target="_blank" rel="noreferrer">
                <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-pointer">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z" />
                </svg>
                Gateway Nation
                <span class="badge badge-sm bg-green-lt ms-auto">Home</span>
              </a>
              <div class="dropdown-divider"></div>
              <a href="{% url 'login' %}" class="dropdown-item text-danger">
                <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-logout">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2" />
                  <path d="M9 12h12l-3 -3" /><path d="M18 15l3 -3" />
                </svg>
                Logout
              </a>
            </div>
          </div>
        </div>
        <div class="navbar-collapse collapse" id="navbar-menu" style="">
          <!-- BEGIN NAVBAR MENU -->
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link text-white" href="{% url 'dashboard' %}">
                <span class="nav-link-icon d-md-none d-lg-inline-block"><!-- Download SVG icon from http://tabler.io/icons/icon/home -->
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                    <path d="M5 12l-2 0l9 -9l9 9l-2 0"></path>
                    <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path>
                    <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path>
                  </svg>
                </span>
                <span class="nav-link-title"> Dashboard </span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="{% url 'guest_list' %}">
                <span class="nav-link-icon d-md-none d-lg-inline-block"><!-- Download SVG icon from http://tabler.io/icons/icon/home -->
                  <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-users">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" /><path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                    <path d="M16 3.13a4 4 0 0 1 0 7.75" /><path d="M21 21v-2a4 4 0 0 0 -3 -3.85" />
                  </svg>
                </span>
                <span class="nav-link-title"> Guests </span>
              </a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle text-white" href="#navbar-records" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button" aria-expanded="false">
                <span class="nav-link-icon d-md-none d-lg-inline-block"><!-- Download SVG icon from http://tabler.io/icons/icon/checkbox -->
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-2">
                    <path d="M12 5l0 14"></path>
                    <path d="M5 12l14 0"></path>
                  </svg>
                </span>
                <span class="nav-link-title"> Records </span>
              </a>
              <div class="dropdown-menu">
                <a href="{% url 'create_guest' %}" class="dropdown-item text-success">
                  <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-users-plus">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
                    <path d="M3 21v-2a4 4 0 0 1 4 -4h4c.96 0 1.84 .338 2.53 .901" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /><path d="M16 19h6" /><path d="M19 16v6" />
                  </svg>
                  Add Guest
                  <span class="badge badge-sm bg-danger-lt ms-auto"> Go </span>
                </a>
                {% if is_admin_group or request.user.is_superuser %}
                <a href="{% url 'create_user' %}" class="dropdown-item text-warning">
                  <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-user-plus">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" /><path d="M16 19h6" /><path d="M19 16v6" />
                    <path d="M6 21v-2a4 4 0 0 1 4 -4h4" />
                  </svg>
                  Add User
                </a>
                {% endif %}
                </a>
                <a class="dropdown-item" data-chart="myChart">
                  <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-file-export">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" />
                    <path d="M11.5 21h-4.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v5m-5 6h7m-3 -3l3 3l-3 3" />
                  </svg>
                  Export PNG
                </a>
              </div>
            </li> 
            {% if show_filters %}
            <li class="nav-item dropdown me-2">
              <a class="nav-link dropdown-toggle text-white" href="#navbar-filter" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button" aria-expanded="false">
                <span class="nav-link-icon d-md-none d-lg-inline-block"><!-- Download SVG icon from http://tabler.io/icons/icon/package -->
                  <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="currentColor"  class="icon icon-tabler icons-tabler-filled icon-tabler-filters">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.396 11.056a6 6 0 0 1 -5.647 10.506q .206 -.21 .396 -.44a8 8 0 0 0 1.789 -6.155a8.02 8.02 0 0 0 3.462 -3.911" />
                    <path d="M4.609 11.051a7.99 7.99 0 0 0 9.386 4.698a6 6 0 1 1 -9.534 -4.594z" /><path d="M12 2a6 6 0 1 1 -6 6l.004 -.225a6 6 0 0 1 5.996 -5.775" />
                  </svg>
                </span>
                <span class="nav-link-title"> Filters </span>
              </a>
              
              <ul class="dropdown-menu">  
                <li class="dropend dropdown">
                  <a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button" aria-expanded="false">
                    Channel of Visit
                  </a>
                  <ul class="dropdown-menu">
                    {% for channel in channels %}
                      <li><a href="?channel={{ channel|urlencode }}" class="dropdown-item">{{ channel }}</a></li>
                    {% endfor %}
                  </ul>
                </li>
                <li class="dropend dropdown">
                  <a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button" aria-expanded="false">
                    Guest Status
                  </a>
                  <ul class="dropdown-menu">
                    {% for status in statuses %}
                      <li><a href="?status={{ status|urlencode }}" class="dropdown-item">{{ status }}</a></li>
                    {% endfor %}
                  </ul>
                </li>
                <li class="dropend dropdown">
                  <a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button" aria-expanded="false">
                    Purpose of Visit
                  </a>
                  <ul class="dropdown-menu">
                    {% for purpose in purposes %}
                      <li><a href="?purpose={{ purpose|urlencode }}" class="dropdown-item">{{ purpose }}</a></li>
                    {% endfor %}
                  </ul>
                </li>
                <li class="dropend dropdown">
                  <a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button" aria-expanded="false">
                    Service Attended
                  </a>
                  <ul class="dropdown-menu">
                    {% for service in services %}
                      <li><a href="?service={{ service|urlencode }}" class="dropdown-item">{{ service }}</a></li>
                    {% endfor %}
                  </ul>
                </li>  
              </ul>
            </li>
            {% endif %}
          </ul>
          <!-- END NAVBAR MENU -->
        </div>
      </div>
    </header>
  </div>


  <!-- Page Content -->
  <main class="page-wrapper">
    <div class="page-body">
      <div class="container">
        {% block content %}{% endblock %}
      </div>
    </div>
  </main>

  <!-- Follow-Up Report Modal -->
  <div class="modal fade" id="followupModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"> Weekly Follow-Up Report</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-4" id="followupModalContent">
          <!-- AJAX content will go here -->
          <div class="text-center py-5 text-muted">
            <div class="spinner-border" role="status"></div>
            <div class="mt-2">Loading form...</div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Success Toast -->
  <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toastContainer">
    <div id="successToast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body">
          ✅ Report submitted successfully!
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>


  <!-- Delete Confirmation Modal -->
  <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Deletion</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure you want to permanently delete this Guest's record?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>

          <!-- Submit actual delete via form -->
          <form method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit" name="delete_guest" class="btn btn-danger">Yes, Delete</button>
          </form>
        </div>
      </div>
    </div>
  </div>


  <!-- Import CSV Modal -->
  <div class="modal fade" id="importCSVModal" tabindex="-1" aria-labelledby="importCSVModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content rounded">
        <form method="post" enctype="multipart/form-data" action="{% url 'import_guests_csv' %}">
          {% csrf_token %}
          <div class="modal-header">
            <h5 class="modal-title" id="importCSVModalLabel">Import Guests via CSV</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="csvFileInput" class="form-label">Select a CSV File</label>
              <input type="file" name="csv_file" id="csvFileInput" class="form-control" accept=".csv" required>
              <small class="text-muted">Must follow the correct column format. <a href="{% static 'guests/sample_template.csv' %}" download>Download template</a></small>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">Import</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  

  <footer class="footer bg-dark text-light py-3 mt-auto border-top shadow-sm">
    <div class="container">
      <div class="row align-items-center text-center text-md-start">
        
        <!-- Left: Logo -->
        <div class="col-12 col-md-4 mb-2 mb-md-0 d-flex justify-content-center justify-content-md-start align-items-center gap-2">
          <img src="{% static 'images/church_logo.png' %}" alt="Church Logo" style="height: 30px;">
          <span class="fw-semibold"></span>
        </div>

        <!-- Center: Copyright -->
        <div class="col-12 col-md-4 mb-2 mb-md-0 text-center small text-muted">
          &copy; {{ now|date:"Y" }} 2025 GATEWAY NATION. All rights reserved.
        </div>

        <!-- Right: Developer Credit -->
        <div class="col-12 col-md-4 text-center text-md-end small">
          Built with ❤️ by 
          <a href="https://www.linkedin.com/in/wunmijordan/" target="_blank" class="text-light text-decoration-underline">
            Wùnmí™ Jordan
          </a>
        </div>

      </div>
    </div>
  </footer>

  <!-- Install PWA Banner -->
  <div id="installBanner" class="card card-sm fixed-bottom mb-3 mx-3 shadow-lg d-none" style="z-index: 1050;">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <strong>Install Gateway Magnet App</strong><br>
        <small class="text-muted">Get the full experience on your device.</small>
      </div>
      <button id="installBtn" class="btn btn-dark">
        <i class="ti ti-download me-1"></i>Install
      </button>
    </div>
  </div>

  <script>
    window.APP_CONFIG = {
      urls: {
        topServicesData: "{% url 'top_services_data' %}",
        channelBreakdown: "{% url 'channel_breakdown' %}",
      },
      csrfToken: "{{ csrf_token }}",
      user: {
        id: {{ request.user.id|default:'null' }},
        isAuthenticated: {{ request.user.is_authenticated|yesno:'true,false' }},
      },
    };
  </script>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="{% static 'js/custom.js' %}"></script>

  {% block extra_js %}{% endblock %}

</body>
</html>